# This is an example nginx.conf. You should adapt it to your main configuration.

# Define an 'upstream' for the Spring Boot application
# This allows nginx to know where to forward dynamic requests.
upstream spring_app {
    server 127.0.0.1:8080; # Assumes your Spring app runs on port 8080
}

server {
    # Nginx will listen on the standard HTTP port 80
    listen 80;
    server_name localhost; # Or your domain name

    # --- Location for Static Files ---
    # Any request starting with /css/, /js/, /img/, etc., will be handled here.
    location ~ ^/(css|js|img|fonts|avatars|videos)/ {
        # The root directory on your server where you copied the static files.
        # Note the forward slashes, which nginx uses.
        root C:/nginx/html/static;

        # Optional: Add caching headers to improve performance
        expires 1y;
        add_header Cache-Control "public";
    }

    # --- Location for Dynamic Requests ---
    # All other requests will be passed to the Spring Boot application.
    location / {
        proxy_pass http://spring_app;
        
        # Standard headers to pass to the backend application
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

# You can add another server block for HTTPS on port 443
# server {
#     listen 443 ssl;
#     server_name localhost;
#
#     ssl_certificate C:/path/to/your/fullchain.pem; 
#     ssl_certificate_key C:/path/to/your/privkey.pem;
#
#     # ... include the same location blocks as above ...
# }
